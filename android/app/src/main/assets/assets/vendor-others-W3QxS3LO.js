function tr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var le={exports:{}},_e={};var Ce;function _n(){return Ce||(Ce=1,(function(e){function t(T,O){var N=T.length;T.push(O);e:for(;0<N;){var D=N-1>>>1,p=T[D];if(0<i(p,O))T[D]=O,T[N]=p,N=D;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var O=T[0],N=T.pop();if(N!==O){T[0]=N;e:for(var D=0,p=T.length,$=p>>>1;D<$;){var G=2*(D+1)-1,ce=T[G],H=G+1,q=T[H];if(0>i(ce,N))H<p&&0>i(q,ce)?(T[D]=q,T[H]=N,D=H):(T[D]=ce,T[G]=N,D=G);else if(H<p&&0>i(q,N))T[D]=q,T[H]=N,D=H;else break e}}return O}function i(T,O){var N=T.sortIndex-O.sortIndex;return N!==0?N:T.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var E=[],u=[],c=1,I=null,f=3,l=!1,A=!1,S=!1,d=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(T){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=T)r(u),O.sortIndex=O.expirationTime,t(E,O);else break;O=n(u)}}function g(T){if(S=!1,v(T),!A)if(n(E)!==null)A=!0,Ee(B);else{var O=n(u);O!==null&&ue(g,O.startTime-T)}}function B(T,O){A=!1,S&&(S=!1,R(Y),Y=-1),l=!0;var N=f;try{for(v(O),I=n(E);I!==null&&(!(I.expirationTime>O)||T&&!Ue());){var D=I.callback;if(typeof D=="function"){I.callback=null,f=I.priorityLevel;var p=D(I.expirationTime<=O);O=e.unstable_now(),typeof p=="function"?I.callback=p:I===n(E)&&r(E),v(O)}else r(E);I=n(E)}if(I!==null)var $=!0;else{var G=n(u);G!==null&&ue(g,G.startTime-O),$=!1}return $}finally{I=null,f=N,l=!1}}var M=!1,m=null,Y=-1,w=5,Le=-1;function Ue(){return!(e.unstable_now()-Le<w)}function ae(){if(m!==null){var T=e.unstable_now();Le=T;var O=!0;try{O=m(!0,T)}finally{O?k():(M=!1,m=null)}}else M=!1}var k;if(typeof P=="function")k=function(){P(ae)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ln=ge.port2;ge.port1.onmessage=ae,k=function(){ln.postMessage(null)}}else k=function(){d(ae,0)};function Ee(T){m=T,M||(M=!0,k())}function ue(T,O){Y=d(function(){T(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){A||l||(A=!0,Ee(B))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(E)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var N=f;f=O;try{return T()}finally{f=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,O){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var N=f;f=T;try{return O()}finally{f=N}},e.unstable_scheduleCallback=function(T,O,N){var D=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?D+N:D):N=D,T){case 1:var p=-1;break;case 2:p=250;break;case 5:p=1073741823;break;case 4:p=1e4;break;default:p=5e3}return p=N+p,T={id:c++,callback:O,priorityLevel:T,startTime:N,expirationTime:p,sortIndex:-1},N>D?(T.sortIndex=N,t(u,T),n(E)===null&&T===n(u)&&(S?(R(Y),Y=-1):S=!0,ue(g,N-D))):(T.sortIndex=p,t(E,T),A||l||(A=!0,Ee(B))),T},e.unstable_shouldYield=Ue,e.unstable_wrapCallback=function(T){var O=f;return function(){var N=f;f=O;try{return T.apply(this,arguments)}finally{f=N}}}})(_e)),_e}var ve;function nr(){return ve||(ve=1,le.exports=_n()),le.exports}var fn={};var Pe;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Pe||(Pe={}));var be;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(be||(be={}));var Me;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Me||(Me={}));var me;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(me||(me={}));var we;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(we||(we={}));var Ge;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ge||(Ge={}));var He;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(He||(He={}));var Fe;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Fe||(Fe={}));var Be;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Be||(Be={}));var Ye;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(Ye||(Ye={}));var Ve;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ve||(Ve={}));var xe;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(xe||(xe={}));var je;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(je||(je={}));var Ke;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(Ke||(Ke={}));var ke;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(ke||(ke={}));var We;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(We||(We={}));var Je;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Je||(Je={}));var Xe;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Xe||(Xe={}));var $e;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($e||($e={}));var qe;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(qe||(qe={}));var Ze;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ze||(Ze={}));var Qe;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Qe||(Qe={}));var ze;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ze||(ze={}));var et;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(et||(et={}));var tt;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(tt||(tt={}));var nt;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(nt||(nt={}));var rt;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(rt||(rt={}));var it;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(it||(it={}));var ot;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ot||(ot={}));var st;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(st||(st={}));var at;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(at||(at={}));var Et;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Et||(Et={}));var ut;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(ut||(ut={}));var ct;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(ct||(ct={}));var lt;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lt||(lt={}));var _t;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_t||(_t={}));var ft;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ft||(ft={}));var It;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(It||(It={}));var Tt;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Tt||(Tt={}));var dt;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(dt||(dt={}));var At;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(At||(At={}));var Ot;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Ot||(Ot={}));var Nt;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Nt||(Nt={}));var St;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(St||(St={}));var ht;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(ht||(ht={}));var Rt;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Rt||(Rt={}));var Dt;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Dt||(Dt={}));var pt;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(pt||(pt={}));var yt;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(yt||(yt={}));var Lt;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Lt||(Lt={}));var Ut;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ut||(Ut={}));var gt;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(gt||(gt={}));var Ct;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ct||(Ct={}));var vt;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(vt||(vt={}));var Pt;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Pt||(Pt={}));var bt;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(bt||(bt={}));var Mt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Mt||(Mt={}));function ne(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function mt(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e){return this instanceof h?(this.v=e,this):new h(e)}function X(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(l){return function(A){return Promise.resolve(A).then(l,I)}}function a(l,A){r[l]&&(i[l]=function(S){return new Promise(function(d,R){o.push([l,S,d,R])>1||E(l,S)})},A&&(i[l]=A(i[l])))}function E(l,A){try{u(r[l](A))}catch(S){f(o[0][3],S)}}function u(l){l.value instanceof h?Promise.resolve(l.value.v).then(c,I):f(o[0][2],l)}function c(l){E("next",l)}function I(l){E("throw",l)}function f(l,A){l(A),o.shift(),o.length&&E(o[0][0],o[0][1])}}function K(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof mt=="function"?mt(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,E){s=e[o](s),i(a,E,s.done,s.value)})}}function i(o,s,a,E){Promise.resolve(E).then(function(u){o({value:u,done:a})},s)}}let Kt=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return Kt=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const In=()=>Kt();function Ae(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Oe=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class C extends Error{}class U extends C{constructor(t,n,r,i){super(`${U.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.error=n}static makeMessage(t,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,r,i){if(!t||!i)return new ie({message:r,cause:Oe(n)});const o=n;return t===400?new Wt(t,o,r,i):t===401?new Jt(t,o,r,i):t===403?new Xt(t,o,r,i):t===404?new $t(t,o,r,i):t===409?new qt(t,o,r,i):t===422?new Zt(t,o,r,i):t===429?new Qt(t,o,r,i):t>=500?new zt(t,o,r,i):new U(t,o,r,i)}}class Ne extends U{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class ie extends U{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class kt extends ie{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Wt extends U{}class Jt extends U{}class Xt extends U{}class $t extends U{}class qt extends U{}class Zt extends U{}class Qt extends U{}class zt extends U{}const Tn=/^[a-z][a-z0-9+.-]*:/i,dn=e=>Tn.test(e);let Se=e=>(Se=Array.isArray,Se(e));const An=Se;let On=An;const wt=On;function Nn(e){if(!e)return!0;for(const t in e)return!1;return!0}function Sn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const hn=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new C(`${e} must be an integer`);if(t<0)throw new C(`${e} must be a positive integer`);return t},Rn=e=>{try{return JSON.parse(e)}catch{return}};const Dn=e=>new Promise(t=>setTimeout(t,e));const V="0.0.1";function pn(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const yn=()=>{var e,t,n,r,i;const o=pn();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":Ht(Deno.build.os),"X-Stainless-Arch":Gt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":Ht((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Gt((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=Ln();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ln(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:t,version:`${i}.${o}.${s}`}}}return null}const Gt=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Ht=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Z;const Un=()=>Z??(Z=yn());function gn(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function en(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Cn(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return en({start(){},async pull(n){const{done:r,value:i}=await t.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function tn(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function vn(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const r=e.getReader(),i=r.cancel();r.releaseLock(),await i}const Pn=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const nn=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function fe(e,t,n){return nn(),new File(e,t??"unknown_file",n)}function bn(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const Mn=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";const rn=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",mn=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&rn(e),wn=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function Gn(e,t,n){if(nn(),e=await e,mn(e))return e instanceof File?e:fe([await e.arrayBuffer()],e.name);if(wn(e)){const i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),fe(await he(i),t,n)}const r=await he(e);if(t||(t=bn(e)),!n?.type){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return fe(r,t,n)}async function he(e){var t,n,r,i,o;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(rn(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(Mn(e))try{for(var a=!0,E=K(e),u;u=await E.next(),t=u.done,!t;a=!0){i=u.value,a=!1;const c=i;s.push(...await he(c))}}catch(c){n={error:c}}finally{try{!a&&!t&&(r=E.return)&&await r.call(E)}finally{if(n)throw n.error}}else{const c=(o=e?.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof e}${c?`; constructor: ${c}`:""}${Hn(e)}`)}return s}function Hn(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}class on{constructor(t){this._client=t}}on._key=[];function sn(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Ft=Object.freeze(Object.create(null)),Fn=(e=sn)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((c,I,f)=>{var l,A,S;/[?#]/.test(I)&&(i=!0);const d=r[f];let R=(i?encodeURIComponent:e)(""+d);return f!==r.length&&(d==null||typeof d=="object"&&d.toString===((S=Object.getPrototypeOf((A=Object.getPrototypeOf((l=d.hasOwnProperty)!==null&&l!==void 0?l:Ft))!==null&&A!==void 0?A:Ft))===null||S===void 0?void 0:S.toString))&&(R=d+"",o.push({start:c.length+I.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(d).slice(8,-1)} is not a valid path parameter`})),c+I+(f===r.length?"":R)},""),a=s.split(/[?#]/,1)[0],E=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=E.exec(a))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((c,I)=>c.start-I.start),o.length>0){let c=0;const I=o.reduce((f,l)=>{const A=" ".repeat(l.start-c),S="^".repeat(l.length);return c=l.start+l.length,f+A+S},"");throw new C(`Path parameters result in path with invalid segments:
${o.map(f=>f.error).join(`
`)}
${s}
${I}`)}return s}),Q=Fn(sn);class an extends on{create(t,n){var r;const{api_version:i=this._client.apiVersion}=t,o=ne(t,["api_version"]);if("model"in o&&"agent_config"in o)throw new C("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new C("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Q`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Q`/${i}/interactions/${t}`,r)}cancel(t,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Q`/${i}/interactions/${t}/cancel`,r)}get(t,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=ne(o,["api_version"]);return this._client.get(Q`/${s}/interactions/${t}`,Object.assign(Object.assign({query:a},r),{stream:(i=n?.stream)!==null&&i!==void 0?i:!1}))}}an._key=Object.freeze(["interactions"]);class En extends an{}function Bn(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}let z;function pe(e){let t;return(z??(t=new globalThis.TextEncoder,z=t.encode.bind(t)))(e)}let ee;function Bt(e){let t;return(ee??(t=new globalThis.TextDecoder,ee=t.decode.bind(t)))(e)}class oe{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?pe(t):t;this.buffer=Bn([this.buffer,n]);const r=[];let i;for(;(i=Yn(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(Bt(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=Bt(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}oe.NEWLINE_CHARS=new Set([`
`,"\r"]);oe.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Yn(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Vn(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}const re={off:0,error:200,warn:300,info:400,debug:500},Yt=(e,t,n)=>{if(e){if(Sn(re,e))return e;L(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(re))}`)}};function J(){}function te(e,t,n){return!t||re[e]>re[n]?J:t[e].bind(t)}const xn={error:J,warn:J,info:J,debug:J};let Vt=new WeakMap;function L(e){var t;const n=e.logger,r=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return xn;const i=Vt.get(n);if(i&&i[0]===r)return i[1];const o={error:te("error",n,r),warn:te("warn",n,r),info:te("info",n,r),debug:te("debug",n,r)};return Vt.set(n,[r,o]),o}const F=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class j{constructor(t,n,r){this.iterator=t,this.controller=n,this.client=r}static fromSSEResponse(t,n,r){let i=!1;const o=r?L(r):console;function s(){return X(this,arguments,function*(){var E,u,c,I;if(i)throw new C("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let f=!1;try{try{for(var l=!0,A=K(jn(t,n)),S;S=yield h(A.next()),E=S.done,!E;l=!0){I=S.value,l=!1;const d=I;if(!f)if(d.data.startsWith("[DONE]")){f=!0;continue}else try{yield yield h(JSON.parse(d.data))}catch(R){throw o.error("Could not parse message into JSON:",d.data),o.error("From chunk:",d.raw),R}}}catch(d){u={error:d}}finally{try{!l&&!E&&(c=A.return)&&(yield h(c.call(A)))}finally{if(u)throw u.error}}f=!0}catch(d){if(Ae(d))return yield h(void 0);throw d}finally{f||n.abort()}})}return new j(s,n,r)}static fromReadableStream(t,n,r){let i=!1;function o(){return X(this,arguments,function*(){var E,u,c,I;const f=new oe,l=tn(t);try{for(var A=!0,S=K(l),d;d=yield h(S.next()),E=d.done,!E;A=!0){I=d.value,A=!1;const R=I;for(const P of f.decode(R))yield yield h(P)}}catch(R){u={error:R}}finally{try{!A&&!E&&(c=S.return)&&(yield h(c.call(S)))}finally{if(u)throw u.error}}for(const R of f.flush())yield yield h(R)})}function s(){return X(this,arguments,function*(){var E,u,c,I;if(i)throw new C("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let f=!1;try{try{for(var l=!0,A=K(o()),S;S=yield h(A.next()),E=S.done,!E;l=!0){I=S.value,l=!1;const d=I;f||d&&(yield yield h(JSON.parse(d)))}}catch(d){u={error:d}}finally{try{!l&&!E&&(c=A.return)&&(yield h(c.call(A)))}finally{if(u)throw u.error}}f=!0}catch(d){if(Ae(d))return yield h(void 0);throw d}finally{f||n.abort()}})}return new j(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();t.push(s),n.push(s)}return o.shift()}});return[new j(()=>i(t),this.controller,this.client),new j(()=>i(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return en({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=pe(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function jn(e,t){return X(this,arguments,function*(){var r,i,o,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new C("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new C("Attempted to iterate over a response with no body");const a=new kn,E=new oe,u=tn(e.body);try{for(var c=!0,I=K(Kn(u)),f;f=yield h(I.next()),r=f.done,!r;c=!0){s=f.value,c=!1;const l=s;for(const A of E.decode(l)){const S=a.decode(A);S&&(yield yield h(S))}}}catch(l){i={error:l}}finally{try{!c&&!r&&(o=I.return)&&(yield h(o.call(I)))}finally{if(i)throw i.error}}for(const l of E.flush()){const A=a.decode(l);A&&(yield yield h(A))}})}function Kn(e){return X(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,E=K(e),u;u=yield h(E.next()),n=u.done,!n;a=!0){o=u.value,a=!1;const c=o;if(c==null)continue;const I=c instanceof ArrayBuffer?new Uint8Array(c):typeof c=="string"?pe(c):c;let f=new Uint8Array(s.length+I.length);f.set(s),f.set(I,s.length),s=f;let l;for(;(l=Vn(s))!==-1;)yield yield h(s.slice(0,l)),s=s.slice(l)}}catch(c){r={error:c}}finally{try{!a&&!n&&(i=E.return)&&(yield h(i.call(E)))}finally{if(r)throw r.error}}s.length>0&&(yield yield h(s))})}class kn{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,i]=Wn(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Wn(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function Jn(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=t,s=await(async()=>{var a;if(t.options.stream)return L(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):j.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const E=n.headers.get("content-type"),u=(a=E?.split(";")[0])===null||a===void 0?void 0:a.trim();return u?.includes("application/json")||u?.endsWith("+json")?await n.json():await n.text()})();return L(e).debug(`[${r}] response parsed`,F({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}class ye extends Promise{constructor(t,n,r=Jn){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new ye(this.client,this.responsePromise,async(n,r)=>t(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const un=Symbol("brand.privateNullableHeaders");function*Xn(e){if(!e)return;if(un in e){const{values:r,nulls:i}=e;yield*r.entries();for(const o of i)yield[o,null];return}let t=!1,n;e instanceof Headers?n=e.entries():wt(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=wt(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(t&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const W=e=>{const t=new Headers,n=new Set;for(const r of e){const i=new Set;for(const[o,s]of Xn(r)){const a=o.toLowerCase();i.has(a)||(t.delete(o),i.add(a)),s===null?(t.delete(o),n.add(a)):(t.append(o,s),n.delete(a))}}return{[un]:!0,values:t,nulls:n}};const Ie=e=>{var t,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(t=fn)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,e))===null||s===void 0?void 0:s.trim()};var cn;class se{constructor(t){var n,r,i,o,s,a,E,{baseURL:u=Ie("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(n=Ie("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:I="v1beta"}=t,f=ne(t,["baseURL","apiKey","apiVersion"]);const l=Object.assign(Object.assign({apiKey:c,apiVersion:I},f),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=l.baseURL,this.timeout=(r=l.timeout)!==null&&r!==void 0?r:se.DEFAULT_TIMEOUT,this.logger=(i=l.logger)!==null&&i!==void 0?i:console;const A="warn";this.logLevel=A,this.logLevel=(s=(o=Yt(l.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:Yt(Ie("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:A,this.fetchOptions=l.fetchOptions,this.maxRetries=(a=l.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(E=l.fetch)!==null&&E!==void 0?E:gn(),this.encoder=Pn,this._options=l,this.apiKey=c,this.apiVersion=I,this.clientAdapter=l.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=W([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return W([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return W([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new C(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${V}`}defaultIdempotencyKey(){return`stainless-node-retry-${In()}`}makeStatusError(t,n,r,i){return U.generate(t,n,r,i)}buildURL(t,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=dn(t)?new URL(t):new URL(i+(i.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return Nn(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:t,path:n},i)))}request(t,n=null){return new ye(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){var i,o,s;const a=await t,E=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=E),await this.prepareOptions(a);const{req:u,url:c,timeout:I}=await this.buildRequest(a,{retryCount:E-n});await this.prepareRequest(u,{url:c,options:a});const f="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),l=r===void 0?"":`, retryOf: ${r}`,A=Date.now();if(L(this).debug(`[${f}] sending request`,F({retryOfRequestLogID:r,method:a.method,url:c,options:a,headers:u.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Ne;const S=new AbortController,d=await this.fetchWithTimeout(c,u,I,S).catch(Oe),R=Date.now();if(d instanceof globalThis.Error){const v=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Ne;const g=Ae(d)||/timed? ?out/i.test(String(d)+("cause"in d?String(d.cause):""));if(n)return L(this).info(`[${f}] connection ${g?"timed out":"failed"} - ${v}`),L(this).debug(`[${f}] connection ${g?"timed out":"failed"} (${v})`,F({retryOfRequestLogID:r,url:c,durationMs:R-A,message:d.message})),this.retryRequest(a,n,r??f);throw L(this).info(`[${f}] connection ${g?"timed out":"failed"} - error; no more retries left`),L(this).debug(`[${f}] connection ${g?"timed out":"failed"} (error; no more retries left)`,F({retryOfRequestLogID:r,url:c,durationMs:R-A,message:d.message})),g?new kt:new ie({cause:d})}const P=`[${f}${l}] ${u.method} ${c} ${d.ok?"succeeded":"failed"} with status ${d.status} in ${R-A}ms`;if(!d.ok){const v=await this.shouldRetry(d);if(n&&v){const w=`retrying, ${n} attempts remaining`;return await vn(d.body),L(this).info(`${P} - ${w}`),L(this).debug(`[${f}] response error (${w})`,F({retryOfRequestLogID:r,url:d.url,status:d.status,headers:d.headers,durationMs:R-A})),this.retryRequest(a,n,r??f,d.headers)}const g=v?"error; no more retries left":"error; not retryable";L(this).info(`${P} - ${g}`);const B=await d.text().catch(w=>Oe(w).message),M=Rn(B),m=M?void 0:B;throw L(this).debug(`[${f}] response error (${g})`,F({retryOfRequestLogID:r,url:d.url,status:d.status,headers:d.headers,message:m,durationMs:Date.now()-A})),this.makeStatusError(d.status,M,m,d.headers)}return L(this).info(P),L(this).debug(`[${f}] response start`,F({retryOfRequestLogID:r,url:d.url,status:d.status,headers:d.headers,durationMs:R-A})),{response:d,options:a,controller:S,requestLogID:f,retryOfRequestLogID:r,startTime:A}}async fetchWithTimeout(t,n,r,i){const o=n||{},{signal:s,method:a}=o,E=ne(o,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),c=globalThis.ReadableStream&&E.body instanceof globalThis.ReadableStream||typeof E.body=="object"&&E.body!==null&&Symbol.asyncIterator in E.body,I=Object.assign(Object.assign(Object.assign({signal:i.signal},c?{duplex:"half"}:{}),{method:"GET"}),E);a&&(I.method=a.toUpperCase());try{return await this.fetch.call(void 0,t,I)}finally{clearTimeout(u)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,i){var o;let s;const a=i?.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(s=u)}const E=i?.get("retry-after");if(E&&!s){const u=parseFloat(E);Number.isNaN(u)?s=Date.parse(E)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){const u=(o=t.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,u)}return await Dn(s),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const o=n-t,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(t,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},t),{method:a,path:E,query:u,defaultBaseURL:c}=s,I=this.buildURL(E,u,c);"timeout"in s&&hn("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:f,body:l}=this.buildBody({options:s}),A=await this.buildHeaders({options:t,method:a,bodyHeaders:f,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:A},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&l instanceof globalThis.ReadableStream&&{duplex:"half"}),l&&{body:l}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:I,timeout:s.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const s=await this.authHeaders(t);let a=W([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Un()),this._options.defaultHeaders,r,t.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=W([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Cn(t)}:this.encoder({body:t,headers:r})}}se.DEFAULT_TIMEOUT=6e4;class y extends se{constructor(){super(...arguments),this.interactions=new En(this)}}cn=y;y.GeminiNextGenAPIClient=cn;y.GeminiNextGenAPIClientError=C;y.APIError=U;y.APIConnectionError=ie;y.APIConnectionTimeoutError=kt;y.APIUserAbortError=Ne;y.NotFoundError=$t;y.ConflictError=qt;y.RateLimitError=Qt;y.BadRequestError=Wt;y.AuthenticationError=Jt;y.InternalServerError=zt;y.PermissionDeniedError=Xt;y.UnprocessableEntityError=Zt;y.toFile=Gn;y.Interactions=En;try{self["workbox:window:7.3.0"]&&_()}catch{}function Re(e,t){return new Promise((function(n){var r=new MessageChannel;r.port1.onmessage=function(i){n(i.data)},e.postMessage(t,[r.port2])}))}function xt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zn(r.key),r)}}function qn(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=(function(i,o){if(i){if(typeof i=="string")return xt(i,o);var s={}.toString.call(i).slice(8,-1);return s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set"?Array.from(i):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?xt(i,o):void 0}})(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},De(e,t)}function Zn(e){var t=(function(n,r){if(typeof n!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,r);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)})(e,"string");return typeof t=="symbol"?t:t+""}try{self["workbox:core:7.3.0"]&&_()}catch{}var Te=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function de(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var x=function(e,t){this.type=e,Object.assign(this,t)};function b(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Qn(){}var zn={type:"SKIP_WAITING"};function jt(e,t){return e&&e.then?e.then(Qn):Promise.resolve()}var er=(function(e){function t(o,s){var a,E;return s===void 0&&(s={}),(a=e.call(this)||this).nn={},a.tn=0,a.rn=new Te,a.en=new Te,a.on=new Te,a.un=0,a.an=new Set,a.cn=function(){var u=a.fn,c=u.installing;a.tn>0||!de(c.scriptURL,a.sn.toString())||performance.now()>a.un+6e4?(a.vn=c,u.removeEventListener("updatefound",a.cn)):(a.hn=c,a.an.add(c),a.rn.resolve(c)),++a.tn,c.addEventListener("statechange",a.ln)},a.ln=function(u){var c=a.fn,I=u.target,f=I.state,l=I===a.vn,A={sw:I,isExternal:l,originalEvent:u};!l&&a.mn&&(A.isUpdate=!0),a.dispatchEvent(new x(f,A)),f==="installed"?a.wn=self.setTimeout((function(){f==="installed"&&c.waiting===I&&a.dispatchEvent(new x("waiting",A))}),200):f==="activating"&&(clearTimeout(a.wn),l||a.en.resolve(I))},a.yn=function(u){var c=a.hn,I=c!==navigator.serviceWorker.controller;a.dispatchEvent(new x("controlling",{isExternal:I,originalEvent:u,sw:c,isUpdate:a.mn})),I||a.on.resolve(c)},a.gn=(E=function(u){var c=u.data,I=u.ports,f=u.source;return b(a.getSW(),(function(){a.an.has(f)&&a.dispatchEvent(new x("message",{data:c,originalEvent:u,ports:I,sw:f}))}))},function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];try{return Promise.resolve(E.apply(this,u))}catch(I){return Promise.reject(I)}}),a.sn=o,a.nn=s,navigator.serviceWorker.addEventListener("message",a.gn),a}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,De(n,r);var i=t.prototype;return i.register=function(o){var s=(o===void 0?{}:o).immediate,a=s!==void 0&&s;try{var E=this;return b((function(u,c){var I=u();return I&&I.then?I.then(c):c(I)})((function(){if(!a&&document.readyState!=="complete")return jt(new Promise((function(u){return window.addEventListener("load",u)})))}),(function(){return E.mn=!!navigator.serviceWorker.controller,E.dn=E.pn(),b(E.bn(),(function(u){E.fn=u,E.dn&&(E.hn=E.dn,E.en.resolve(E.dn),E.on.resolve(E.dn),E.dn.addEventListener("statechange",E.ln,{once:!0}));var c=E.fn.waiting;return c&&de(c.scriptURL,E.sn.toString())&&(E.hn=c,Promise.resolve().then((function(){E.dispatchEvent(new x("waiting",{sw:c,wasWaitingBeforeRegister:!0}))})).then((function(){}))),E.hn&&(E.rn.resolve(E.hn),E.an.add(E.hn)),E.fn.addEventListener("updatefound",E.cn),navigator.serviceWorker.addEventListener("controllerchange",E.yn),E.fn}))})))}catch(u){return Promise.reject(u)}},i.update=function(){try{return this.fn?b(jt(this.fn.update())):b()}catch(o){return Promise.reject(o)}},i.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},i.messageSW=function(o){try{return b(this.getSW(),(function(s){return Re(s,o)}))}catch(s){return Promise.reject(s)}},i.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Re(this.fn.waiting,zn)},i.pn=function(){var o=navigator.serviceWorker.controller;return o&&de(o.scriptURL,this.sn.toString())?o:void 0},i.bn=function(){try{var o=this;return b((function(s,a){try{var E=s()}catch(u){return a(u)}return E&&E.then?E.then(void 0,a):E})((function(){return b(navigator.serviceWorker.register(o.sn,o.nn),(function(s){return o.un=performance.now(),s}))}),(function(s){throw s})))}catch(s){return Promise.reject(s)}},(function(o,s,a){return s&&$n(o.prototype,s),Object.defineProperty(o,"prototype",{writable:!1}),o})(t,[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])})((function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,r){this.jn(n).add(r)},t.removeEventListener=function(n,r){this.jn(n).delete(r)},t.dispatchEvent=function(n){n.target=this;for(var r,i=qn(this.jn(n.type));!(r=i()).done;)(0,r.value)(n)},t.jn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e})());const rr=Object.freeze(Object.defineProperty({__proto__:null,Workbox:er,WorkboxEvent:x,messageSW:Re},Symbol.toStringTag,{value:"Module"}));export{tr as g,nr as r,rr as w};
